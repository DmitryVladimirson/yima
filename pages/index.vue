<template>
  <div class="flex flex-col gap-10 lg:gap-20">
    <section>
      <div class="container">
        <!--        <div class="flex items-center justify-around rounded-xl bg-white p-8">-->
        <!--          <DeliveryIcon style="color: black" class="max-lg:hidden" width="100" height="100" />-->
        <!--          <div class="m-0 flex w-fit flex-col">-->
        <!--            <h2 class="mb-4 text-black">–ó–∞–ø—É—Å–∫–∞—î–º–æ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—É –¥–æ—Å—Ç–∞–≤–∫—É –ø–æ –£–∂–≥–æ—Ä–æ–¥—É!</h2>-->
        <!--            <p class="text-black">-->
        <!--              –ü—Ä–æ—Å—Ç–æ –∑–∞–º–æ–≤–ª—è–π, –∞ –º–∏ –¥–æ—Å—Ç–∞–≤–∏–º–æ <span class="text-success">–®–í–ò–î–ö–û</span> —Ç–∞-->
        <!--              <span class="text-success">–ë–ï–ó–ö–û–®–¢–û–í–ù–û</span>.-->
        <!--            </p>-->
        <!--          </div>-->
        <!--        </div>-->

        <!-- –í–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏ –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö –∏ –∞–∫—Ü–∏—è—Ö -->

        <!-- –¢–∞–±—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
        <div class="bg-white p-6 rounded-2xl shadow-md m-2 mb-8 w-full">
          <div class="flex flex-col lg:flex-row items-center">
            <div class="flex flex-col items-center lg:items-start text-gray-800 w-full lg:w-1/2 p-4">
              <h2 class="mb-8 text-2xl md:text-4xl font-bold">
                –¢–û–í–ê–†–ò –ó <span class="text-[#fbbf24]">–Ñ–í–†–û–ü–ò</span>
              </h2>
              <h2 class="mb-6 text-lg font-semibold">–ì–£–†–¢–û–í–ï –ü–û–°–¢–ê–ß–ê–ù–ù–Ø –î–õ–Ø –í–ê–®–û–ì–û –ë–Ü–ó–ù–ï–°–£</h2>

              <div class="flex items-center mb-1">
                <span class="mr-2 text-lg">üçè</span>
                <h3 class="text-md">–ü—Ä–æ–¥—É–∫—Ç–∏ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è</h3>
              </div>
              <div class="flex items-center mb-1">
                <span class="mr-2 text-lg">üß¥</span>
                <h3 class="text-md">–ü–æ–±—É—Ç–æ–≤–∞ —Ö—ñ–º—ñ—è</h3>
              </div>

              <div class="mt-4 flex items-center text-success">
                <span class="mr-2">üöö</span>
                <h4 class="text-lg font-semibold">–ë–ï–ó–ö–û–®–¢–û–í–ù–ê –î–û–°–¢–ê–í–ö–ê –£–ñ–ì–û–†–û–î–û–ú</h4>
              </div>
            </div>
            <div class="w-full lg:w-1/2 flex justify-center mt-6 lg:mt-0">
              <PayIcon class="text-9xl text-success lg:text-[300px]"></PayIcon>
            </div>
          </div>
        </div>

        <div v-if="!currentTab" class="tabs">
          <button class="tablink font-bold" @click="openTab('payment')">–°–ø–æ—Å–æ–±–∏ –æ–ø–ª–∞—Ç–∏</button>
          <button class="tablink font-bold" @click="openTab('delivery')">–°–ø–æ—Å–æ–±–∏ –¥–æ—Å—Ç–∞–≤–∫–∏</button>
          <button class="tablink font-bold" @click="openTab('return')">–ó–∞–º—ñ–Ω–∞ —Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É</button>
          <button class="tablink font-bold" @click="openTab('about')">–ü—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—é</button>
        </div>
        <div id="payment" class="tabcontent" :class="{ 'active-tab': currentTab === 'payment' }">
          <div class="flex justify-center items-center flex-col">
            <h2 class="mb-8 text-2xl md:text-4xl text-center">–°–ü–û–°–û–ë–ò –û–ü–õ–ê–¢–ò</h2>
            <div class="flex flex-col lg:flex-row justify-around">
              <div class="lg:w-1/3 flex flex-col items-center rounded-2xl bg-white p-4 text-gray-800 shadow m-2">
                <CashIcon class="text-8xl mb-8"></CashIcon>
                <div class="font-bold text-lg md:text-2xl mb-4 flex text-center justify-center">–ì–û–¢–Ü–í–ö–û–í–ò–ô –†–û–ó–†–ê–•–£–ù–û–ö
                </div>
                <div class="text-center p-4 text-ml md:text-lg">–û–ø–ª–∞—Ç–∞ –≥–æ—Ç—ñ–≤–∫–æ—é –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ —Ç–æ–≤–∞—Ä—É —É –∫—É—Ä‚Äô—î—Ä–∞.</div>
              </div>
              <div class="lg:w-1/3 flex flex-col items-center rounded-2xl bg-white p-4 text-gray-800 shadow m-2">
                <CardIcon class="text-8xl mb-8"></CardIcon>
                <div class="font-bold text-lg md:text-2xl mb-4 flex text-center justify-center">–ë–ï–ó–ì–û–¢–Ü–í–ö–û–í–ò–ô
                  –†–û–ó–†–ê–•–£–ù–û–ö
                </div>
                <div class="text-center p-4 text-ml md:text-lg">
                  –û–ø–ª–∞—Ç–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±–∞–Ω–∫—ñ–≤—Å—å–∫–∏—Ö –∫–∞—Ä—Ç Visa –π MasterCard.
                  –û–ø–ª–∞—Ç–∞ –ø–æ –±–µ–∑–≥–æ—Ç—ñ–≤–∫–æ–≤–æ–º—É —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –≤ –∫–∞—Å—ñ –±—É–¥—å-—è–∫–æ–≥–æ –±–∞–Ω–∫—É –∞–±–æ –∑ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É –í–∞—à–æ—ó
                  –∫–æ–º–ø–∞–Ω—ñ—ó.
                </div>
              </div>
              <div class="lg:w-1/3 flex flex-col items-center rounded-2xl bg-white p-4 text-gray-800 shadow m-2">
                <PayIcon class="text-8xl mb-8"></PayIcon>
                <div class="font-bold text-lg md:text-2xl mb-4 flex text-center justify-center">–ù–ê–ö–õ–ê–î–ï–ù–ò–ú –ü–õ–ê–¢–ï–ñ–ï–ú
                </div>
                <div class="text-ml md:text-lg p-4 text-center">
                  –û–ø–ª–∞—Ç–∞ –Ω–∞–∫–ª–∞–¥–µ–Ω–∏–º –ø–ª–∞—Ç–µ–∂–µ–º (–∑–∞–≤–¥–∞—Ç–æ–∫ 10% –≤—ñ–¥ —Å—É–º–∏)—É –≤–∏–ø–∞–¥–∫—É –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∫—É—Ä‚Äô—î—Ä—Å—å–∫–æ—é —Å–ª—É–∂–±–æ—é –ù–æ–≤–∞ –ü–æ—à—Ç–∞
                  –∞–±–æ Deliveri.
                  <div class="mt-2">
                    –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≥–æ—Ç—ñ–≤–∫–æ—é –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ —Ç–æ–≤–∞—Ä—É –Ω–∞ —Å–∫–ª–∞–¥—ñ —Å–ª—É–∂–±–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.
                    –û–ø–ª–∞—Ç–∞ –∑–∞ –ø–æ—Å–ª—É–≥–∏ –∑–≥—ñ–¥–Ω–æ –∑ —Ç–∞—Ä–∏—Ñ–æ–º –ù–æ–≤–æ—ó –ø–æ—à—Ç–∏ 20 –≥—Ä–Ω. + 2% –≤—ñ–¥ —Å—É–º–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.
                  </div>

                </div>
              </div>
            </div>
            <TheButton class="btn btn-primary mt-2 flex w-fit items-center gap-2" type="button" @click="handleReturn">
              –ù–∞–∑–∞–¥
            </TheButton>
          </div>
        </div>

        <div id="delivery" class="tabcontent" :class="{ 'active-tab': currentTab === 'delivery' }">

          <div class="flex justify-center items-center flex-col">
            <h2 class="mb-8 text-2xl md:text-4xl text-center">–°–ü–û–°–û–ë–ò –î–û–°–¢–ê–í–ö–ò</h2>
            <div class="flex flex-col lg:flex-row justify-around">
              <div class="lg:w-1/3 flex flex-col items-center rounded-2xl bg-white p-4 text-gray-800 shadow m-2">
                <CashIcon class="text-8xl mb-8"></CashIcon>
                <div class="font-bold text-lg md:text-2xl mb-4 flex text-center justify-center">–ü–û –£–ñ–ì–û–†–û–î–£ –ö–£–†–¨–Ñ–†–û–ú
                </div>
                <div class="text-center p-4 text-ml md:text-lg">–ó–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—É –Ω–∞ —Å–∫–ª–∞–¥—ñ, —Ç–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ñ
                  –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º 1-2 –¥–Ω—ñ–≤ –∑
                  –¥–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. <br> <span class="font-medium text-green-600">–î–û–°–¢–ê–í–ö–ê –ü–û –£–ñ–ì–û–†–û–î–£ –¢–ê –í –ü–ï–†–ï–î–ú–Ü–°–¢–Ü –ë–ï–ó–ö–û–®–¢–û–í–ù–ê –ü–†–ò –ó–ê–ú–û–í–õ–ï–ù–ù–Ü –í–Ü–î 5000 –≥—Ä–Ω.</span>
                </div>
              </div>
              <div class="lg:w-1/3 flex flex-col items-center rounded-2xl bg-white p-4 text-gray-800 shadow m-2">
                <PayIcon class="text-8xl mb-8"></PayIcon>
                <div class="font-bold text-lg md:text-2xl mb-4 flex text-center justify-center">–ü–û –£–ö–†–ê–á–ù–Ü</div>
                <div class="text-ml md:text-lg p-4 text-center">
                  –ù–æ–≤–∞ –ø–æ—à—Ç–∞/ Diliveri <br>
                  –î–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –ø–æ—à—Ç–∏, –ø—ñ—Å–ª—è –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –ø—Ä–∏ —É–º–æ–≤—ñ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—É –Ω–∞
                  —Å–∫–ª–∞–¥—ñ.
                  <div class="mt-2">
                    –í–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ ‚Äì –∑–∞ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –ù–æ–≤–æ—ó –ø–æ—à—Ç–∏/Deliveri.
                    –ê–¥—Ä–µ—Å–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ ‚Äî –∑–∞ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –ù–æ–≤–æ—ó –ü–æ—à—Ç–∏/Deliveri.
                  </div>

                </div>
              </div>
            </div>
            <TheButton class="btn btn-primary mt-2 flex w-fit items-center gap-2" type="button" @click="handleReturn">
              –ù–∞–∑–∞–¥
            </TheButton>
          </div>
        </div>

        <div id="return" class="tabcontent" :class="{ 'active-tab': currentTab === 'return' }">
          <div class="text-center flex justify-center items-center flex-col">
            <div class="mb-4 lg:mb-8 text-xl lg:text-4xl font-bold">–ó–ê–ú–Ü–ù–ê –¢–ê –ü–û–í–ï–†–ù–ï–ù–ù–Ø –¢–û–í–ê–†–£</div>
            <div class="mb-4 lg:mb-8 text-md">
              <p class="mb-4">
                –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É, –ø—Ä–∏–¥–±–∞–Ω–æ–≥–æ –≤ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—ñ Euro Price, –º–æ–∂–Ω–∞ –∑–¥—ñ–π—Å–Ω–∏—Ç–∏ –ø—Ä–æ—Ç—è–≥–æ–º 5 –¥–Ω—ñ–≤ –∑ –º–æ–º–µ–Ω—Ç—É
                –ø—Ä–∏–¥–±–∞–Ω–Ω—è. <span class="font-bold">–û–±–æ–≤ º—è–∑–∫–æ–≤—ñ —É–º–æ–≤–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É:</span> <br> —Ç–æ–≤–∞—Ä –Ω–µ –±—É–≤ –≤
                –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó, –ø–∞–∫—É–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –Ω–µ
                –ø–æ—Ä—É—à–µ–Ω–µ —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–æ —Ç–æ–≤–∞—Ä–Ω–∏–π —á–µ–∫ —ñ –≥–∞—Ä–∞–Ω—Ç—ñ–π–Ω–∏–π —Ç–∞–ª–æ–Ω, —è–∫—â–æ –≤—ñ–Ω –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–∏–π.
              </p>
              <p>
                –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω Euro Price –∑–∞–≤–∂–¥–∏ –π–¥–µ –Ω–∞–∑—É—Å—Ç—Ä—ñ—á –∫–ª—ñ—î–Ω—Ç–∞–º.
              </p>
              <p>
                –Ø–∫—â–æ –≤–∏ –∑–∞–ª–∏—à–∏–ª–∏—Å—è –Ω–µ–∑–∞–¥–æ–≤–æ–ª–µ–Ω—ñ —è–∫—ñ—Å—Ç—é –ø—Ä–∏–¥–±–∞–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É, –º–∏ –≥–æ—Ç–æ–≤—ñ –≤ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É —Ä–æ–∑–≥–ª—è–Ω—É—Ç–∏
                –≤–∞—à –≤–∏–ø–∞–¥–æ–∫ —ñ –≤–∏—Ä—ñ—à–∏—Ç–∏ –π–æ–≥–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –ø–∞–∫—É–≤–∞–Ω–Ω—è –ø–æ—Ä—É—à–µ–Ω–µ.
              </p>
              <p>
                –ê–¥—Ä–µ—Å–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤: —Å–µ–ª–æ –ú–∏–Ω–∞–π(–ó–∞–∫–∞—Ä–ø–∞—Ç—Ç—è) –ù–æ–≤–∞ –ü–æ—à—Ç–∞ ‚Ññ1<br>
                –ü–æ—à—Ç–∞ –¥–ª—è –∑–∞–ø–∏—Ç–∞–Ω—å —Ç–∞ –∑–∞—É–≤–∞–∂–µ–Ω—å: <span class="font-bold">euprice.ua@gmail.com</span>
              </p>
            </div>
            <TheButton class="btn btn-primary mt-2 flex w-fit items-center gap-2" type="button" @click="handleReturn">
              –ù–∞–∑–∞–¥
            </TheButton>
          </div>

        </div>

        <div id="about" class="tabcontent" :class="{ 'active-tab': currentTab === 'about' }">
          <div class=" flex justify-center items-center flex-col">
            <h2 class="mb-4 lg:mb-8 text-xl lg:text-4xl font-bold">–ü–†–û –ö–û–ú–ü–ê–ù–Ü–Æ</h2>
            <div class="mb-4 lg:mb-8 text-md">
              <p>
                –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –Ω–∞—à–æ—ó –∫–æ–º–ø–∞–Ω—ñ—ó, —è–∫–∞ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –Ω–∞ –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ–±—É—Ç–æ–≤–æ—ó
                —Ö—ñ–º—ñ—ó –∑ –Ñ–≤—Ä–æ–ø–∏ –≥—É—Ä—Ç–æ–º. –ú–∏ –ø—Ä–æ–ø–æ–Ω—É—î–º–æ —à–∏—Ä–æ–∫–∏–π –∞—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç —è–∫—ñ—Å–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ –∑–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏–º–∏ —Ü—ñ–Ω–∞–º–∏, –ø—Ä–∏
                —Ü—å–æ–º—É –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –≤–∏—Å–æ–∫–∏–π —Ä—ñ–≤–µ–Ω—å –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –∫–æ–∂–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞.
              </p>
              <h3>–ß–æ–º—É –æ–±–∏—Ä–∞—é—Ç—å –Ω–∞—Å:</h3>
              <ol>
                <li class="font-bold mb-2">1. –ë–∞–≥–∞—Ç–æ—Ä—ñ—á–Ω–∏–π –¥–æ—Å–≤—ñ–¥ —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å: –ú–∏ –ø—Ä–∞—Ü—é—î–º–æ –≤ –≥–∞–ª—É–∑—ñ –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è –∑ –Ñ–≤—Ä–æ–ø–∏ –≤–∂–µ –ø—Ä–æ—Ç—è–≥–æ–º –±–∞–≥–∞—Ç—å–æ—Ö
                  —Ä–æ–∫—ñ–≤. –ù–∞—à—ñ –∫–ª—ñ—î–Ω—Ç–∏ –¥–æ–≤—ñ—Ä—è—é—Ç—å –Ω–∞–º –∑–∞–≤–¥—è–∫–∏ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ–π —è–∫–æ—Å—Ç—ñ —Ç–∞ —Å–≤–æ—î—á–∞—Å–Ω–∏–º –ø–æ—Å—Ç–∞–≤–∫–∞–º. (–ü—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ
                  —Å–∫–ª–∞–¥–∞—î–º–æ –¥–æ–≥–æ–≤—ñ—Ä –ø—Ä–æ –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –§–û–ü/–¢–û–í)
                </li>
                <li class="font-bold mb-2">2. –®–∏—Ä–æ–∫–∏–π –∞—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –ø—Ä–æ–¥—É–∫—Ü—ñ—ó: –í–∏ –∑–Ω–∞–π–¥–µ—Ç–µ —É –Ω–∞—Å –≤—Å–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –ø–æ–±—É—Ç—É —Ç–∞ –≥–æ—Å–ø–æ–¥–∞—Ä—Å—Ç–≤–∞: –≤—ñ–¥
                  —Å–º–∞—á–Ω–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è –¥–æ –¥–æ–≥–ª—è–¥—É –∑–∞ –¥–æ–º—É —ñ –æ—Å–æ–±–∏—Å—Ç–æ—é –≥—ñ–≥—ñ—î–Ω–æ—é.
                </li>
                <li class="font-bold mb-2">3. –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ñ —Ü—ñ–Ω–∏ —Ç–∞ –ø–æ—Å—Ç—ñ–π–Ω—ñ –∑–Ω–∏–∂–∫–∏: –ú–∏ –ø—Ä–æ–ø–æ–Ω—É—î–º–æ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ü—ñ–Ω–∏ –Ω–∞—à–∏–º –∫–ª—ñ—î–Ω—Ç–∞–º, –∞ —Ç–∞–∫–æ–∂
                  —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –∑–Ω–∏–∂–∫–∏ –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–∏—Ö –ø–æ–∫—É–ø—Ü—ñ–≤.
                </li>
                <li class="font-bold mb-2">4. –Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –∫–æ–∂–Ω–æ–≥–æ –∑–∞–º–æ–≤–Ω–∏–∫–∞: –ú–∏ —Ä–æ–∑—É–º—ñ—î–º–æ, —â–æ –∫–æ–∂–µ–Ω –∫–ª—ñ—î–Ω—Ç —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π, —Ç–æ–º—É –º–∏
                  —Å—Ç–µ–∂–∏–º–æ –∑–∞ –≤–∞—à–∏–º–∏ –ø–æ—Ç—Ä–µ–±–∞–º–∏ —Ç–∞ –∑–∞–≤–∂–¥–∏ –≥–æ—Ç–æ–≤—ñ –∑–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è.
                </li>
                <li class="font-bold mb-2">5. –ó–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ –Ω–∞ –ø–µ—Ä—à–æ–º—É –º—ñ—Å—Ü—ñ: –ù–∞–º –≤–∞–∂–ª–∏–≤–∞ –¥—É–º–∫–∞ –∫–æ–∂–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞. –Ø–∫—â–æ –≤–∏ –Ω–µ –∑–∞–¥–æ–≤–æ–ª–µ–Ω—ñ,
                  –º–∏ –≥–æ—Ç–æ–≤—ñ –∑—Ä–æ–±–∏—Ç–∏ –≤—Å–µ –º–æ–∂–ª–∏–≤–µ, —â–æ–± –≤–∏ –±—É–ª–∏ –∑–∞–¥–æ–≤–æ–ª–µ–Ω—ñ –Ω–∞—à–∏–º–∏ –ø–æ—Å–ª—É–≥–∞–º–∏.
                </li>
                <li>–ú–∏ –ø–∏—à–∞—î–º–æ—Å—è –Ω–∞—à–æ—é —Ä–µ–ø—É—Ç–∞—Ü—ñ—î—é —ñ –∑–∞–≤–∂–¥–∏ –ø—Ä–∞–≥–Ω–µ–º–æ –Ω–∞–¥–∞–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –Ω–∞–π–∫—Ä–∞—â—ñ —Ç–æ–≤–∞—Ä–∏ —Ç–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è.
                  –ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ –Ω–∞—Å —Å—å–æ–≥–æ–¥–Ω—ñ —Ç–∞ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —á–æ–º—É –º–∏ —î –Ω–∞–¥—ñ–π–Ω–∏–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ –¥–ª—è –≤–∞—à–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É –∞–±–æ
                  –ø–æ–±—É—Ç—É!
                </li>
                <li>–ü–æ—Å—Ç–∞—á–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è, –≥—É—Ä—Ç–æ–≤—ñ –ø–æ—Å—Ç–∞–≤–∫–∏ –∑ –Ñ–≤—Ä–æ–ø–∏, –∫—É–ø–∏—Ç–∏ –ø–æ–±—É—Ç–æ–≤—É —Ö—ñ–º—ñ—é –æ–ø—Ç–æ–º, —î–≤—Ä–æ–ø–µ–π—Å—å–∫—ñ
                  —Ç–æ–≤–∞—Ä–∏ –¥–ª—è –ø–æ–±—É—Ç—É, –Ω–∞–¥—ñ–π–Ω—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏ —Ö–∞—Ä—á–æ–≤–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤, –æ–ø—Ç–æ–≤—ñ —Ü—ñ–Ω–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏, —ñ–º–ø–æ—Ä—Ç –∑ –Ñ–≤—Ä–æ–ø–∏,
                  –æ–ø—Ç–æ–≤—ñ –∑–Ω–∏–∂–∫–∏ –Ω–∞ –ø–æ–±—É—Ç–æ–≤—É —Ö—ñ–º—ñ—é, –ø—Ä–æ–¥—É–∫—Ç–∏ –¥–µ—à–µ–≤–æ, —î–≤—Ä–æ–ø–µ–π—Å—å–∫—ñ —Å–º–∞–∫–æ–ª–∏–∫–∏ —Ç–∞ —Å–æ–ª–æ–¥–æ—â—ñ.
                </li>
              </ol>
            </div>
            <TheButton class="btn btn-primary mt-2 flex w-fit items-center gap-2" type="button" @click="handleReturn">
              –ù–∞–∑–∞–¥
            </TheButton>
          </div>

        </div>

      </div>



    </section>
    <HomepageChosenProducts v-if="!currentTab" :chosen-products="chosenProducts.member"/>
    <HomepageSaleProducts v-if="!currentTab" :sale-products="saleProducts.member"/>
    <section v-if="!currentTab">
      <div id="plp_container" ref="plpContainer" class="container flex flex-col gap-6">
        <div class="block md:hidden">
          <TheH>
            {{ $t('allProducts') }}
          </TheH>
        </div>
        <template v-if="products.member.length > 0 || filters.length > 0">
          <div class="flex items-center justify-between gap-4">
            <TheH class="hidden md:block">
              {{ $t('allProducts') }}
            </TheH>
            <TheButton class="btn btn-primary flex h-10 items-center md:hidden" @click="showFilters = !showFilters">
              <FilterIcon class="text-lg"/>
            </TheButton>
            <div class="ml-auto flex gap-2">
              <FormKit v-model="currentSort" input-class="!border-0 shadow" type="select" :options="sortOptions"/>
              <FormKit
                v-if="products.totalItems > itemsPerPageOptionDefault"
                v-model="itemsPerPage"
                input-class="!border-0 shadow"
                type="select"
                :options="itemsPerPageOptions"
              />
            </div>
          </div>
          <div class="flex flex-col gap-10 md:flex-row xl:gap-20">
            <div class="hidden w-full md:block md:w-1/3 lg:w-1/5 xl:w-1/6" :class="{ '!block': showFilters }">
              <ClientOnly>
                <div ref="productFiltersWrapper" class="h-full w-full">
                  <ProductFilters :filters="filters" class="sticky top-4" @filters-changed="handleChangeFilters"/>
                </div>

                <template #fallback>
                  <PlaceholderFilters class="hidden sm:block"/>
                </template>
              </ClientOnly>
            </div>
            <div class="flex h-full flex-col items-center gap-4 md:w-4/5 md:items-end xl:w-5/6">
              <ClientOnly>
                <ProductList :products="products.member"/>
                <ThePagination
                  v-model="currentPage"
                  :total-items="products.totalItems"
                  :items-per-page="itemsPerPage"
                  @pagination-change="updateProducts"
                />
                <template #fallback>
                  <PlaceholderProductList/>
                </template>
              </ClientOnly>
            </div>
          </div>
        </template>
        <TheMessageBox v-else :message="$t('noProductsFound')"></TheMessageBox>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import {useYimaProduct, ref, useI18n, useRoute, navigateTo, watch, useThrottleFn} from '#imports'
import DeliveryIcon from '~icons/mdi/truck-delivery-outline'
import CashIcon from '~icons/mdi/account-cash-outline'
import CardIcon from '~icons/mdi/account-credit-card-outline'
import PayIcon from '~icons/mdi/truck-delivery-outline'
import FilterIcon from '~icons/mdi/menu'
import TheButton from "~/components/TheButton.vue";

const currentTab = ref('')

const openTab = (tabName: string) => {
  currentTab.value = tabName
}
const handleReturn = () => {
  currentTab.value = ''
}
const {getProducts, getProductFilters} = useYimaProduct()
const {t} = useI18n()
const route = useRoute()

const showFilters = ref(false)

const sortOptions = computed(() => [
  {label: t('newest'), value: 'createdAt:desc'},
  {label: t('cheapestFirst'), value: 'price:asc'},
  {label: t('expensiveFirst'), value: 'price:desc'},
  {label: t('a-z'), value: 'name:asc'},
  {label: t('z-a'), value: 'name:desc'},
])

const itemsPerPageOptions = ref([
  {label: '20', value: 20},
  {label: '30', value: 30},
  {label: '50', value: 50},
])

const itemsPerPageOptionDefault = 20
const productFiltersWrapper = ref()
const currentSort = ref(route.query.sort_by ?? '')
const currentPage = ref(Number(route.query.page) || 1)
const itemsPerPage = ref(Number(route.query.itemsPerPage) || itemsPerPageOptionDefault)
const filterString = ref(route.query.filter_by ?? undefined)

const plpContainer = ref(null)
const scrollToTop = async () => {
  const position = plpContainer.value.offsetTop - 16
  window.scrollTo({
    top: position,
    behavior: 'smooth',
  })
}

const [{data: filters}, {data: products}, {data: chosenProducts}, {data: saleProducts}] = await Promise.all([
  getProductFilters(),
  getProducts({
    params: {
      sort_by: currentSort.value || undefined,
      page: currentPage.value,
      per_page: itemsPerPage.value,
      filter_by: filterString.value,
    },
  }),
  getProducts({
    params: {
      filter_by: 'categories:[chosen-products]',
    },
  }),
  getProducts({
    params: {
      filter_by: 'categories:[sale]',
    },
  }),
])

function handleChangeFilters(resultString: string) {
  if (filterString.value === resultString) {
    return
  }

  filterString.value = resultString

  setTimeout(async () => {
    if (filterString.value === resultString) {
      currentPage.value = 1
      await updateProducts(true)
    }
  }, 50)
}

const updateProducts = useThrottleFn(async (resetPage?: boolean) => {
  const {data: productsResponse, error} = await getProducts({
    params: {
      sort_by: currentSort.value || undefined,
      filter_by: filterString.value,
      page: currentPage.value,
      per_page: itemsPerPage.value,
    },
  })
  if (error.value || !productsResponse.value) {
    return
  }

  products.value = productsResponse.value

  await scrollToTop()
  await navigateTo({
    query: {
      ...route.query,
      ...(currentSort.value === sortOptions.value[0].value
        ? {sort_by: undefined}
        : {sort_by: currentSort.value || undefined}),
      ...(filterString.value ? {filter_by: filterString.value} : {filter_by: undefined}),
      ...(itemsPerPage.value === itemsPerPageOptionDefault
        ? {itemsPerPage: undefined}
        : {itemsPerPage: itemsPerPage.value}),
      ...(resetPage === true ? {page: undefined} : {}),
    },
  })
}, 50)

watch([currentSort], async () => {
  await updateProducts()
})

watch(productFiltersWrapper, () => {
  if (!productFiltersWrapper?.value) {
    return
  }

  const productFilters = productFiltersWrapper.value.querySelector('div')
  const filtersHeight = productFilters.clientHeight
  const targetHeight = window.innerHeight - 25
  const categoriesList = productFilters.querySelector('#categories')
  const categoriesListHeight = categoriesList.clientHeight
  if (filtersHeight < targetHeight) {
    return
  }

  const endHeight = Math.max(categoriesListHeight - (filtersHeight - targetHeight), 200)
  categoriesList.style.height = `${endHeight}px`
  categoriesList.classList.add('overflow-auto', 'pr-2')
})
</script>

<style scoped>
.banner {
  width: 100%;
  overflow: hidden;
  display: flex;
  justify-content: center;
}
.tabs {
  display: flex;
  justify-content: center;
  overflow: hidden;
  width: 100%;
}

.tablink {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  margin: 10px 15px;
  transition: 0.3s;
  background-color: white;
  border-radius: 0.5rem;
  color: black;
}

.tablink:hover {
  background-color: #e8b508;
  border-radius: 0.5rem
}

.tabcontent {
  display: none;
  padding: 6px 12px;
  border-top: none;
}

.tabcontent.active-tab {
  display: block !important;
}
</style>
